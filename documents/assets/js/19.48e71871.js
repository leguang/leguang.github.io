(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{228:function(t,a,v){"use strict";v.r(a);var _=v(0),e=Object(_.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("div",{staticClass:"content"},[v("h1",{attrs:{id:"公共接口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#公共接口","aria-hidden":"true"}},[t._v("#")]),t._v(" 公共接口")]),t._v(" "),v("blockquote",[v("p",[t._v("Author：Leguang")]),t._v(" "),v("p",[t._v("E-Mail："),v("a",{attrs:{href:"mailto:langmanleguang@qq.com"}},[t._v("langmanleguang@qq.com")])])]),t._v(" "),v("p",[t._v("该文档描述的是一些公共的接口，如：App的更新，设备信息的搜集等。")]),t._v(" "),v("h2",{attrs:{id:"初始化信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#初始化信息","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化信息")]),t._v(" "),v("p",[t._v("此接口目的是为了向后台提交设备的信息、App信息、用户信息，以便后台运用。")]),t._v(" "),v("blockquote",[v("p",[t._v("地址：https://api.xxx.com/path/v1/initializer")])]),t._v(" "),v("h5",{attrs:{id:"请求头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求头","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("POST /path/v1/initializer\nAccept: application/json\nContent-Type: application/json;charset=UTF-8\nToken: token_G34G34G34G34G35G5\nApplication: 应用名称:版本号\nPlatform: Android\n")])])]),v("h5",{attrs:{id:"参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参数","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "message": "上传啦啦啦",\n    "token": "token_13121241rf31rf13f",\n    "data": {\n        "app": {\n            "debug": "false",\n            "versionCode": "5",\n            "versionName": "1.0.5"\n        },\n        "device": {\n            "brand": "google",\n            "display": "OPD3.170816.012",\n            "displayHeight": "1920",\n            "displayWidth": "1080",\n            "fingerprint": "google/walleye/walleye:8.0.0/OPD3.170816.012/4343094:user/release-keys",\n            "manufacturer": "Google",\n            "model": "Pixel 2",\n            "product": "walleye"\n        },\n        "os": {\n            "host": "fe80::ccaf:c6ff:fe19:57a6%dummy0",\n            "root": "false",\n            "rom": "xiaomi",\n            "version": "26"\n        },\n        "location": {\n            "longitude": "333",\n            "latitude": "565",\n            "address":"中国深圳龙岗"\n        },\n        "deviceID": "1313512r123rd12r12r12re"\n    }\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("是否必要")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("可选（可当做扩展字段）")])]),t._v(" "),v("tr",[v("td",[t._v("token")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("未来考虑放到请求头里")])]),t._v(" "),v("tr",[v("td",[t._v("data")]),t._v(" "),v("td",[t._v("Object")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("data.deviceID")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("根据综合信息生成的一个设备唯一ID，依托于阿里云、华为、小米等推送生成的，其中阿里云的如果App被删掉重新下载可能会得到不通设备唯一ID")])]),t._v(" "),v("tr",[v("td",[t._v("data.app")]),t._v(" "),v("td",[t._v("Object")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("有关App信息对象")])]),t._v(" "),v("tr",[v("td",[t._v("data.app.versionName")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("版本名称（iOS中称为版本号），例如1.0.1")])]),t._v(" "),v("tr",[v("td",[t._v("data.app.versionCode")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("版本号")])]),t._v(" "),v("tr",[v("td",[t._v("data.app.debug")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("是否为debug版本")])]),t._v(" "),v("tr",[v("td",[t._v("data.device")]),t._v(" "),v("td",[t._v("Object")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("设备信息对象")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.brand")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("品牌信息，如小米、华为")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.model")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("型号信息，如")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.product")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("G750-T01")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.manufacturer")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("生产厂商信息")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.fingerprint")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("设备指纹，一个综合的，唯一的关于设备的描述")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.displayWidth")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("屏幕像素宽度")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.displayHeight")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("屏幕像素高度")])]),t._v(" "),v("tr",[v("td",[t._v("data.device.display")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("系统屏幕信息")])]),t._v(" "),v("tr",[v("td",[t._v("data.os")]),t._v(" "),v("td",[t._v("Object")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("系统信息对象")])]),t._v(" "),v("tr",[v("td",[t._v("data.os.version")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("系统版本号，如19代表4.4")])]),t._v(" "),v("tr",[v("td",[t._v("data.os.isRoot")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("手机系统是否有Root过")])]),t._v(" "),v("tr",[v("td",[t._v("data.os.rom")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("该字段用于Android平台，iOS传空即可。该字段用于标记ROM，但事实上我们用来标记推送类别，Android会根据系统ROM信息上传不同的值，MIUI值为xiaomi，如果EMUI值为huawei，其他的统一值为aliyun。默认不传后台也当做aliyun推送。")])]),t._v(" "),v("tr",[v("td",[t._v("data.os.host")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("本机ip地址，这个是内网地址，所以没有命名为ip，ip表示外网地址，由服务器端在请求头里获取")])]),t._v(" "),v("tr",[v("td",[t._v("data.location.longitude")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("地球上的经度，这个用高德地图或者百度地图获取即可")])]),t._v(" "),v("tr",[v("td",[t._v("data.location.latitude")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("地球上的维度，这个用高德地图或者百度地图获取即可")])]),t._v(" "),v("tr",[v("td",[t._v("data.location.address")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("详细地址")])])])]),t._v(" "),v("h5",{attrs:{id:"响应头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应头","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("Content-Type:application/json; charset=utf-8\nStatus:200 OK\n")])])]),v("h5",{attrs:{id:"响应"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "message": "居然被你提交成功了",\n    "code": 200\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("key")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th"),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("code")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"删除设备信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#删除设备信息","aria-hidden":"true"}},[t._v("#")]),t._v(" 删除设备信息")]),t._v(" "),v("p",[t._v("该接口用于用户登出时调用，因为用户如果注销了，就不应该再发推送给用户了。至于后台是不是真的删除这些数据要酌情考虑，个人建议是不要删除，只是做出一个删除标志就好。")]),t._v(" "),v("blockquote",[v("p",[t._v("地址：https://api.xxx.com/path/v1/initializer")])]),t._v(" "),v("h5",{attrs:{id:"请求头-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求头-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("DELETE /path/v1/initializer\nAccept: application/json\nContent-Type: application/json;charset=UTF-8\nToken: token_G34G34G34G34G35G5\nApplication: 应用名称:版本号\nPlatform: Android\n")])])]),v("h5",{attrs:{id:"参数-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参数-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "message": "上传啦啦啦",\n    "token": "token_13121241rf31rf13f"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("可选（可当做扩展字段）")])]),t._v(" "),v("tr",[v("td",[t._v("token")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("未来考虑放到请求头里")])])])]),t._v(" "),v("h5",{attrs:{id:"响应头-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应头-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("Content-Type:application/json; charset=utf-8\nStatus:200 OK\n")])])]),v("h5",{attrs:{id:"响应-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "message": "居然被你删除成功了",\n    "code": 200\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th"),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("code")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])])])]),t._v(" "),v("h5",{attrs:{id:"调用时机："}},[v("a",{staticClass:"header-anchor",attrs:{href:"#调用时机：","aria-hidden":"true"}},[t._v("#")]),t._v(" 调用时机：")]),t._v(" "),v("p",[t._v("传递过去的数据如果有token则存储起来与用户关联（暂时还无需做到类似今日头条那样抽象强大），")]),t._v(" "),v("ol",[v("li",[t._v("每次启动都会传。")]),t._v(" "),v("li",[t._v("登录成功后。")])]),t._v(" "),v("h5",{attrs:{id:"策略"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#策略","aria-hidden":"true"}},[t._v("#")]),t._v(" 策略")]),t._v(" "),v("p",[t._v("依托于这些信息，可以做出精准分析，但是仅仅利用这些数据配合某种逻辑处理还是无法查出谁是刷子的，因此还需要结合时间这一维度，在使用时只需要利用ip和id这个参数做两个维度的分析即可。\n分析如下：")]),t._v(" "),v("ol",[v("li",[t._v("对于一般的刷子，在同一时刻，同一ip（外网IP地址，由服务器端获取）下如果存在多个id同时挖矿，则可认定该ip下的所有id对应的用户是刷子通过模拟器、设备、多开等形式在挖矿，建议加入到黑名单中。")])]),t._v(" "),v("p",[v("s",[t._v("2. 对于高级刷子（技术内行），他可能会采取动态ip，高手能针对多个App（App多开形式或者其他真机、模拟器）代理多个外网ip，此时就可以利用host这个参数来分析，因为外网代理的ip无论你怎么换，你内网的地址也总只有少数几个（比如172.16.2.15），因此同一个内网地址host对应了多个id即可认为这个些id对应的用户为刷子，但是又由于绝大多数人的内网ip都差不多，都是172.168.xx.xx，因此这个只能作为一个补充辅助策略。")])]),t._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[t._v("根据手机的品牌、型号、屏幕分辨率等得知手机的廉价性（一般是指真机），来判断是否是刷子在利用廉价手机在刷。")]),t._v(" "),v("li",[t._v("新增经纬度的辅助判断，对于同一经纬度的，那必然是在一个矿区了。")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://i.imgur.com/zvL4u0n.png",alt:""}})]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"app更新"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#app更新","aria-hidden":"true"}},[t._v("#")]),t._v(" App更新")]),t._v(" "),v("p",[t._v("考虑到我们的App是未上应用商店的，只能靠自身提示更新，因此需要一个完善的更新系统，但由于暂时没有后台管理系统，所以只能靠手工上传发布（未来会有可视化的后台来管理）。同时要考虑指定某个版本升级到最新版本这一需求。")]),t._v(" "),v("blockquote",[v("p",[t._v("地址：https://api.xxx.com/path/v1/upgrade")])]),t._v(" "),v("h5",{attrs:{id:"请求头-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求头-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("GET /path/v1/upgrade\nAccept: application/json\nContent-Type: application/json;charset=UTF-8\nToken: token_G34G34G34G34G35G5\nApplication: 应用名称:版本号\nPlatform: Android\n")])])]),v("h5",{attrs:{id:"参数-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参数-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("无\n")])])]),v("h5",{attrs:{id:"响应头-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应头-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("Content-Type:application/json; charset=utf-8\nStatus:200 OK\n")])])]),v("h5",{attrs:{id:"响应-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "code": "200",\n    "message": "上传啦啦啦",\n    "data": {\n        "time": "2018-04-28 23:57:12",\n        "size": "50M",\n        "fileName": "xxx.apk",\n        "force": true,\n        "versionCode": 1,\n        "versionName": "1.0.0",\n        "link": "https://miaoyoujuan.com/both.apk",\n        "description": "摩尔钱包",\n        "title": "摩尔钱包",\n        "ignore": true,\n        "md": "234T243T2T"\n    }\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("是否必要")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("code")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data")]),t._v(" "),v("td",[t._v("JSON对象")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data.time")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("该条更新记录的上传时间")])]),t._v(" "),v("tr",[v("td",[t._v("data.size")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("下载包的大小")])]),t._v(" "),v("tr",[v("td",[t._v("data.fileName")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("下载的文件的名称")])]),t._v(" "),v("tr",[v("td",[t._v("data.force")]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("是否强制升值")])]),t._v(" "),v("tr",[v("td",[t._v("data.versionCode")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("针对安卓版本的版本号，安卓是根据整个版本号比大小来比较版本的新旧")])]),t._v(" "),v("tr",[v("td",[t._v("data.versionName")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("版本的名称，比如1.0.2")])]),t._v(" "),v("tr",[v("td",[t._v("data.link")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("下载连接地址")])]),t._v(" "),v("tr",[v("td",[t._v("data.description")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("显示在界面上的更新日志")])]),t._v(" "),v("tr",[v("td",[t._v("data.title")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("显示在界面上的更新标题")])]),t._v(" "),v("tr",[v("td",[t._v("data.ignore")]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("是否可以忽略该版本")])]),t._v(" "),v("tr",[v("td",[t._v("data.md")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("考虑到包有可能被篡改，应该针对下载的包进行检测。")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"ios客户端检测"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ios客户端检测","aria-hidden":"true"}},[t._v("#")]),t._v(" iOS客户端检测")]),t._v(" "),v("p",[t._v("考虑到之前淘宝上的签名卖家恶意代码注入，因此决定在App进入之后进行包信息的自检。")]),t._v(" "),v("blockquote",[v("p",[t._v("地址：https://api.xxx.com/path/v1/apphash")])]),t._v(" "),v("h5",{attrs:{id:"请求头-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求头-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("GET /path/v1/apphash\nAccept: application/json\nContent-Type: application/json;charset=UTF-8\nToken: token_G34G34G34G34G35G5\nApplication: 应用名称:版本号\nPlatform: Android\n")])])]),v("h5",{attrs:{id:"参数-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参数-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("无\n")])])]),v("h5",{attrs:{id:"响应头-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应头-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("Content-Type:application/json; charset=utf-8\nStatus:200 OK\n")])])]),v("h5",{attrs:{id:"响应-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "code": "200",\n    "message": "上传啦啦啦",\n    "data": {\n        "md": "234T243T2T",\n        "hash": "24T24T2T424T24T",\n        "versionName": "1.0.0",\n        "time": "2018-04-28 23:57:12"\n    }\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("是否必要")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("code")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data")]),t._v(" "),v("td",[t._v("JSON对象")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data.time")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("该条更新记录的上传时间")])]),t._v(" "),v("tr",[v("td",[t._v("data.versionName")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("版本的名称，比如1.0.2")])]),t._v(" "),v("tr",[v("td",[t._v("data.hash")]),t._v(" "),v("td",[t._v("boolean")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("iOS客户端的资源hash")])]),t._v(" "),v("tr",[v("td",[t._v("data.md")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("iOS客户端的数字摘要信息")])])])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"时间戳"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#时间戳","aria-hidden":"true"}},[t._v("#")]),t._v(" 时间戳")]),t._v(" "),v("p",[t._v("该接口用于一些需要服务器端时间为标准的业务，暂时只用于密码输入次数过多被禁止6小时再试。")]),t._v(" "),v("blockquote",[v("p",[t._v("地址：https://api.xxx.com/path/v1/timestamp")])]),t._v(" "),v("h5",{attrs:{id:"请求头-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求头-5","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("GET /path/v1/timestamp \nAccept: application/json\nContent-Type: application/json;charset=UTF-8\n")])])]),v("h5",{attrs:{id:"参数-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参数-5","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("无\n")])])]),v("h5",{attrs:{id:"响应头-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应头-5","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应头")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("Content-Type:application/json; charset=utf-8\nStatus:200 OK\n")])])]),v("h5",{attrs:{id:"响应-5"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应-5","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "message": "居然被你删除成功了",\n    "code": 200,\n    "data": {\n        "time": "1534903480654"\n    }\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("params")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("是否必要")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("message")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("code")]),t._v(" "),v("td",[t._v("int")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data")]),t._v(" "),v("td",[t._v("JSON对象")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("同上")])]),t._v(" "),v("tr",[v("td",[t._v("data.time")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("当前服务器的时间戳")])])])]),t._v(" "),v("hr")])}],!1,null,null,null);a.default=e.exports}}]);