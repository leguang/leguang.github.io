(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{207:function(t,_,v){"use strict";v.r(_);var d=v(0),a=Object(d.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("div",{staticClass:"content"},[v("h1",{attrs:{id:"打币系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#打币系统","aria-hidden":"true"}},[t._v("#")]),t._v(" 打币系统")]),t._v(" "),v("blockquote",[v("p",[t._v("Author：Leguang")]),t._v(" "),v("p",[t._v("E-Mail："),v("a",{attrs:{href:"mailto:langmanleguang@qq.com"}},[t._v("langmanleguang@qq.com")])])]),t._v(" "),v("h2",{attrs:{id:"商家支付sdk"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#商家支付sdk","aria-hidden":"true"}},[t._v("#")]),t._v(" 商家支付sdk")]),t._v(" "),v("h3",{attrs:{id:"概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),v("p",[t._v("第三方应用可以通过接入支付sdk的方式，使用虚拟货币进行充值，提现功能。进一步活跃社区，赋能商户，丰富生态。\n为了提高数据的安全性，降低中途被截获篡改的风险，强烈建议由发起调用的应用对应的服务端按照要求对数据进行二次封装加密后，再调用支付中心服务。")]),t._v(" "),v("h3",{attrs:{id:"阅读对象"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#阅读对象","aria-hidden":"true"}},[t._v("#")]),t._v(" 阅读对象")]),t._v(" "),v("p",[t._v("产品经理，开发人员，测试人员，区块链工程师，其他有关人员。")]),t._v(" "),v("h3",{attrs:{id:"主要流程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#主要流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 主要流程")]),t._v(" "),v("p",[t._v("为提供一套安全，高性能，可伸缩的商户支付服务，经过多轮讨论之后，需要由以下几套主体流程结合完成。")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("支付交互流程\n"),v("img",{attrs:{src:"media/%E6%94%AF%E4%BB%98%E4%BA%A4%E4%BA%92%E6%B5%81%E7%A8%8B.png",alt:"支付交互流程"}})])]),t._v(" "),v("li",[v("p",[t._v("服务端确认订单流程\n"),v("img",{attrs:{src:"media/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%A1%AE%E8%AE%A4%E8%AE%A2%E5%8D%95%E6%B5%81%E7%A8%8B.png",alt:"服务端确认订单流程"}}),t._v("\n以上是与链交互的主体流程。")])])]),t._v(" "),v("h3",{attrs:{id:"数据库设计"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#数据库设计","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库设计")]),t._v(" "),v("p",[v("img",{attrs:{src:"media/%E6%94%AF%E4%BB%98%E4%B8%AD%E5%BF%83%E6%95%B0%E6%8D%AE%E5%BA%93.jpg",alt:"支付中心数据库"}})]),t._v(" "),v("h4",{attrs:{id:"merchant-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#merchant-t","aria-hidden":"true"}},[t._v("#")]),t._v(" merchant_t")]),t._v(" "),v("p",[t._v("商户信息，应用接入开放平台时，首先需要注册成为平台商户。\n包括商户编号，商户名称(不能重名)，邮箱地址，商户描述信息，是否有效，创建时间，修改时间。\n无效的商户不能再对接开放平台，不能调用接口。\n未来需要开放商户注册服务，从安全和功能丰富性角度考虑，建议完善手机注册认证等功能。")]),t._v(" "),v("h4",{attrs:{id:"merchant-account-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#merchant-account-t","aria-hidden":"true"}},[t._v("#")]),t._v(" merchant_account_t")]),t._v(" "),v("p",[t._v("商户账户，一个商户可以有多个商户账号，一币一账，支持多币种。\n包括商户账号ID，应用ID，商户ID，币种，商户账号地址，可提现额度，累计提现额度，是否有效，创建时间，修改时间。\n累计提现额度用于记录该币种账户上历史累计提现总数；可提现额度用于记录该币种账户当前可以提现的额度，订单完成后，金额存储在中转账户上，商户需要发起提现，才能将交易所得转到商户账户上。")]),t._v(" "),v("h4",{attrs:{id:"merchant-secret-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#merchant-secret-t","aria-hidden":"true"}},[t._v("#")]),t._v(" merchant_secret_t")]),t._v(" "),v("p",[t._v("商户加密配置，为了保证交易的安全性，支付中心采用商户秘钥和平台私钥两对秘钥进行加签，确保数据不被篡改，保证数据安全性。\n包括应用加密配置ID，应用编号，商户编号，商户私钥，商户公钥，平台公钥，平台私钥，是否有效，创建时间，修改时间。\n为了保证秘钥对本身的安全性，建议在存储上做一些改进，比如公司公私钥分开存储。")]),t._v(" "),v("h4",{attrs:{id:"product-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#product-t","aria-hidden":"true"}},[t._v("#")]),t._v(" product_t")]),t._v(" "),v("p",[t._v("产品信息，用于存储产品的基本信息。包括产品编号，产品名称，产品名称，产品描述，是否有效，创建见时间，修改时间。\n产品信息和单品信息，建议由商户接入应用自身维护，中心只维护一些特殊商品，比如授权销售商品等。")]),t._v(" "),v("h4",{attrs:{id:"product-item-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#product-item-t","aria-hidden":"true"}},[t._v("#")]),t._v(" product_item_t")]),t._v(" "),v("p",[t._v("单品信息，SKU，用于存储商品唯一性信息。包括单品ID，产品ID，币种，价格，是否有效，创建时间，修改时间。")]),t._v(" "),v("h4",{attrs:{id:"trade-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#trade-t","aria-hidden":"true"}},[t._v("#")]),t._v(" trade_t")]),t._v(" "),v("p",[t._v("订单信息，存储订单的基本信息。\n包括统一订单号(建议采用格式如yyyyMMdd+10位流水累计，如201801020000000001，由于时间原因，暂时按uuid方式进行存储的)，应用ID，商户ID，币种，额度，扩展信息(可以用于描述交易的具体商品，此处的作用与trade_item_t相同，只有详细和具体的区别)，用户编号(若买家为系统统一用户，则完善填入本值)，买家信息(json结构，用于存储三方应用的用户信息)，支付账户(记录用户用于支付的钱包地址)，订单完成时间，订单状态，是否有效，创建时间，修改时间，中转块哈希。")]),t._v(" "),v("h4",{attrs:{id:"trade-item-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#trade-item-t","aria-hidden":"true"}},[t._v("#")]),t._v(" trade_item_t")]),t._v(" "),v("p",[t._v("交易单品信息，存储一些需要平台特殊处理的商品(比如授权销售商品)。\n包括订单单品条目，单品编号，数量，币种，额度，创建时间，修改时间，是否有效。")]),t._v(" "),v("h4",{attrs:{id:"refund-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#refund-t","aria-hidden":"true"}},[t._v("#")]),t._v(" refund_t")]),t._v(" "),v("p",[t._v("退款单，记录退款的概要信息。\n包括退货单编号，订单编号，币种，退款金额，扩展信息(描述为什么退款)，退货单状态，是否有效，创建时间，修改时间，退款块哈希。\n失去了退款等业务，就失去了一个商业系统的完整性。所以，未来我们也需要退款功能。")]),t._v(" "),v("h4",{attrs:{id:"refund-item-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#refund-item-t","aria-hidden":"true"}},[t._v("#")]),t._v(" refund_item_t")]),t._v(" "),v("p",[t._v("退款单品信息，存储一些需要平台特殊处理的商品(比如授权销售商品)。\n包括退款单品条目编号，单品编号，单品数量，币种，金额，是否有效，创建时间，修改时间。")]),t._v(" "),v("h4",{attrs:{id:"withdraw-t"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#withdraw-t","aria-hidden":"true"}},[t._v("#")]),t._v(" withdraw_t")]),t._v(" "),v("p",[t._v("提现表，记录商户的每一笔提现记录。交易从开始到完成，交易款项都是在用户账户和中转账户中进行。交易完成后，商户需要申请提现，才能将交易的收益打到自己的商户账户上。\n包括提现编号，商户账户ID，币种，提现金额，提现状态，是否有效，创建时间，修改时间，提现块哈希。")]),t._v(" "),v("h3",{attrs:{id:"基础参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#基础参数","aria-hidden":"true"}},[t._v("#")]),t._v(" 基础参数")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("支付中心分配给开发者的应用ID，一个商户号可以拥有多个应用")]),t._v(" "),v("td",[t._v("2014072300007148")])]),t._v(" "),v("tr",[v("td",[t._v("商户ID")]),t._v(" "),v("td",[t._v("merchantID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("支付中心分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("编码格式")]),t._v(" "),v("td",[t._v("charset")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("utf-8")]),t._v(" "),v("td",[t._v("请求使用的编码格式，如utf-8,gbk,gb2312等")])]),t._v(" "),v("tr",[v("td",[t._v("签名类型")]),t._v(" "),v("td",[t._v("signType")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("RSA2")]),t._v(" "),v("td",[t._v("商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("xxxxx")]),t._v(" "),v("td",[t._v("采用应用私钥对对参数进行非签名外的其他参数进行加密的到的签名数据")])]),t._v(" "),v("tr",[v("td",[t._v("请求时间戳")]),t._v(" "),v("td",[t._v("timestamp")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(19)")]),t._v(" "),v("td",[t._v("2014-07-24 03:07:50")]),t._v(" "),v("td",[t._v('发送请求的时间，格式"yyyy-MM-dd HH:mm:ss"')])]),t._v(" "),v("tr",[v("td",[t._v("回调通知链接")]),t._v(" "),v("td",[t._v("notifyUrl")]),t._v(" "),v("td",[t._v("否")]),t._v(" "),v("td",[t._v("String(256)")]),t._v(" "),v("td",[t._v("https://api.xx.com/receive_notify.htm")]),t._v(" "),v("td",[t._v("支付中心主动通知商户服务器里指定的页面http/https路径，建议商户使用https")])])])]),t._v(" "),v("h3",{attrs:{id:"接口定义"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#接口定义","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口定义")]),t._v(" "),v("p",[t._v("支付中心主要提供以下几个接口")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("接口")]),t._v(" "),v("th",[t._v("地址")]),t._v(" "),v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("描述")]),t._v(" "),v("th",[t._v("使用对象")]),t._v(" "),v("th",[t._v("加签")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("统一下单")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/unifiedorder")]),t._v(" "),v("td",[t._v("POST")]),t._v(" "),v("td",[t._v("创建预支付订单")]),t._v(" "),v("td",[t._v("商户服务端")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("获取统一订单")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/unifiedorder")]),t._v(" "),v("td",[t._v("GET")]),t._v(" "),v("td",[t._v("根据prepay_id获取预支付订单信息")]),t._v(" "),v("td",[t._v("钱包应用")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("中转支付")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/transfer")]),t._v(" "),v("td",[t._v("POST")]),t._v(" "),v("td",[t._v("向中转账户打款")]),t._v(" "),v("td",[t._v("钱包应用")]),t._v(" "),v("td",[t._v("否")])]),t._v(" "),v("tr",[v("td",[t._v("查询订单")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/orderquery")]),t._v(" "),v("td",[t._v("GET")]),t._v(" "),v("td",[t._v("查询单笔订单信息")]),t._v(" "),v("td",[t._v("商户应用")]),t._v(" "),v("td",[t._v("否")])]),t._v(" "),v("tr",[v("td",[t._v("关闭订单")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/closeorder")]),t._v(" "),v("td",[t._v("PATCH")]),t._v(" "),v("td",[t._v("支付失败或支付超时需要关闭原订单")]),t._v(" "),v("td",[t._v("商户应用")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("完成订单确认")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/confirmorder")]),t._v(" "),v("td",[t._v("POST")]),t._v(" "),v("td",[t._v("用户收到商品，确认无误后可以调用本接口进行确认完成，或者在系统指定时间内自动确认")]),t._v(" "),v("td",[t._v("商户服务端")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("商户提现")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/withdraw")]),t._v(" "),v("td",[t._v("POST")]),t._v(" "),v("td",[t._v("交易确认完成之后，商户可以将商户平台账户上的金额提现到商户账户上")]),t._v(" "),v("td",[t._v("商户服务端")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("申请退款")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")])]),t._v(" "),v("tr",[v("td",[t._v("退款处理")]),t._v(" "),v("td",[t._v("https://api.xxx.com/pay/refund")]),t._v(" "),v("td",[t._v("POST")]),t._v(" "),v("td",[t._v("商户退款给用户")]),t._v(" "),v("td",[t._v("商户应用")]),t._v(" "),v("td",[t._v("是")])]),t._v(" "),v("tr",[v("td",[t._v("查询退款")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")])]),t._v(" "),v("tr",[v("td",[t._v("下载对账单")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")])])])]),t._v(" "),v("h4",{attrs:{id:"创建预支付"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#创建预支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建预支付")]),t._v(" "),v("h5",{attrs:{id:"应用场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#应用场景","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),v("p",[t._v("商户应用发起交易后，首先在商户服务端创建商户订单，然后在支付中心创建预支付交易订单。 返回预支付交易会话标识prepayId和对应的签名给商户服务端。")]),t._v(" "),v("h5",{attrs:{id:"状态机"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#状态机","aria-hidden":"true"}},[t._v("#")]),t._v(" 状态机")]),t._v(" "),v("p",[t._v("支付状态转变如下：\n"),v("img",{attrs:{src:"media/%E8%AE%A2%E5%8D%95%E7%8A%B6%E6%80%81%E6%9C%BA.png",alt:"订单状态机"}})]),t._v(" "),v("h5",{attrs:{id:"接口连接"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#接口连接","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口连接")]),t._v(" "),v("p",[t._v("POST https://api.xxx.com/pay/unifiedorder")]),t._v(" "),v("h5",{attrs:{id:"请求参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求参数","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"appID":"2014072300007148",\n\t"merchantID":"1230000109",\n\t"charset":"UTF-8",\n\t"signType":"RSA2",\n\t"timestamp":"1540266193",\n\t"merchantTrade":"20150806125346",\n\t"current":"MOL",\n\t"amount":"300",\n\t"tradeIp":"127.0.0.1",\n\t"startAt":"20091225091010",\n\t"expireAt":"20091225091010",\n\t"userID":"8d331065d34211e89b0b00163e007a48",\n\t"buyer":{\n\t\t"name":"李大嘴",\n\t\t"countryCode":"0086",\n\t\t"phoneNumber":"13888888888"\n\t}\n\t"external":"订阅",\n\t"products":[\n\t\t{\n\t\t\t"productID":"11r23",\n\t\t\t"price":"100",\n\t\t\t"current":"MOL",\n\t\t\t"quantity":"3",\n\t\t\t"amount":"300"\n\t\t}\n\t],\n\t"sign":"xxxxxxx"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("支付中心分配给开发者的应用ID，一个商户号可以拥有多个应用")])]),t._v(" "),v("tr",[v("td",[t._v("商户ID")]),t._v(" "),v("td",[t._v("merchantID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("支付中心分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("编码格式")]),t._v(" "),v("td",[t._v("charset")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("utf-8")]),t._v(" "),v("td",[t._v("请求使用的编码格式，如utf-8,gbk,gb2312等")])]),t._v(" "),v("tr",[v("td",[t._v("签名类型")]),t._v(" "),v("td",[t._v("signType")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("RSA2")]),t._v(" "),v("td",[t._v("商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2")])]),t._v(" "),v("tr",[v("td",[t._v("请求时间戳")]),t._v(" "),v("td",[t._v("timestamp")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(19)")]),t._v(" "),v("td",[t._v("1540266193")]),t._v(" "),v("td",[t._v('发送请求的时间，格式"yyyy-MM-dd HH:mm:ss"')])]),t._v(" "),v("tr",[v("td",[t._v("商户订单号")]),t._v(" "),v("td",[t._v("merchantTrade")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("20150806125346")]),t._v(" "),v("td",[t._v("商户系统内部订单号，要求32个字符内，只能是数字、大小写字母_-且在同一个商户号下唯一")])]),t._v(" "),v("tr",[v("td",[t._v("币种")]),t._v(" "),v("td",[t._v("currency")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(16)")]),t._v(" "),v("td",[t._v("MOL")]),t._v(" "),v("td",[t._v("支付币种，默认为mol")])]),t._v(" "),v("tr",[v("td",[t._v("金额")]),t._v(" "),v("td",[t._v("amount")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Decimal(15,3)")]),t._v(" "),v("td",[t._v("10")]),t._v(" "),v("td",[t._v("支付额度，与币种对应")])]),t._v(" "),v("tr",[v("td",[t._v("终端IP")]),t._v(" "),v("td",[t._v("tradeIp")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(39)")]),t._v(" "),v("td",[t._v("127.0.0.1")]),t._v(" "),v("td",[t._v("交易ip，支持ipv4和ipv6")])]),t._v(" "),v("tr",[v("td",[t._v("交易开始时间")]),t._v(" "),v("td",[t._v("startAt")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(14)")]),t._v(" "),v("td",[t._v("20091225091010")]),t._v(" "),v("td",[t._v("订单生成时间，格式为yyyyMMddHHmmss，如2009年12月25日9点10分10秒表示为20091225091010。")])]),t._v(" "),v("tr",[v("td",[t._v("交易失效时间")]),t._v(" "),v("td",[t._v("expireAt")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(14)")]),t._v(" "),v("td",[t._v("20091225091010")]),t._v(" "),v("td",[t._v("订单失效时间，格式为yyyyMMddHHmmss，如2009年12月27日9点10分10秒表示为20091227091010。订单失效时间是针对订单号而言的，由于在请求支付的时候有一个必传参数prepayId只有两小时的有效期，所以在重入时间超过2小时的时候需要重新请求下单接口获取新的prepayId。")])]),t._v(" "),v("tr",[v("td",[t._v("用户标识")]),t._v(" "),v("td",[t._v("userID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("8d331065d34211e89b0b00163e007a48")]),t._v(" "),v("td",[t._v("发起支付的用户id")])]),t._v(" "),v("tr",[v("td",[t._v("商品信息")]),t._v(" "),v("td",[t._v("products")]),t._v(" "),v("td",[t._v("否")]),t._v(" "),v("td",[t._v("jsonArray")]),t._v(" "),v("td",[t._v('[{"productID":"11r23","price":"100","currency":"MOL","quantity":"3","sum":"300"}]')]),t._v(" "),v("td",[t._v("商品信息列表")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("xxxxx")]),t._v(" "),v("td",[t._v("采用应用私钥对对参数进行非签名外的其他参数进行加密的到的签名数据")])])])]),t._v(" "),v("h5",{attrs:{id:"签名算法"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#签名算法","aria-hidden":"true"}},[t._v("#")]),t._v(" 签名算法")]),t._v(" "),v("p",[t._v("参数明按照字典序进行排序，使用URL键值对的格式(即key1=value1&key2=value2…)拼接成字符串\n请按如下规则进行处理：")]),t._v(" "),v("ul",[v("li",[t._v("排除不加入签名的属性")]),t._v(" "),v("li",[t._v("如果参数值为空则不参与签名")]),t._v(" "),v("li",[t._v("参数名字典序排序")]),t._v(" "),v("li",[t._v("参数名区分大小写")])]),t._v(" "),v("p",[t._v("具体步骤如下：")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("传入原始参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "amount": "1",\n    "appID": "6dd50bbfdc3711e898a000163e002b60",\n    "buyer": {\n      "countryCode": "0086",\n      "name": "Oxford",\n      "phoneNumber": "13828770003"\n    },\n    "charset": "UTF-8",\n    "currency": "mol",\n    "external": "下订单",\n    "items": [\n      {\n        "amount": "1",\n        "currency": "mol",\n        "price": "1",\n        "productID": "00001",\n        "productItemID": "11111",\n        "quantity": "1"\n      }\n    ],\n    "merchantID": "5ae0d007dc3711e898a000163e002b60",\n    "merchantTrade": "1100113",\n    "signType": "RSA2"\n  }\n')])])])]),t._v(" "),v("li",[v("p",[t._v("将原始参数中值为json块的数据进行属性名按字典序unicde编码\nbuyer:")])])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("%7B%22countryCode%22%3A%220086%22%2C%22name%22%3A%22Oxford%22%2C%22phoneNumber%22%3A%2213828770003%22%7D\n")])])]),v("p",[t._v("items:")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("%5B%7B%22amount%22%3A%221%22%2C%22currency%22%3A%22mol%22%2C%22price%22%3A%221%22%2C%22productID%22%3A%2200001%22%2C%22productItemID%22%3A%2211111%22%2C%22quantity%22%3A%221%22%7D%5D\n")])])]),v("ol",{attrs:{start:"3"}},[v("li",[t._v("然后将最外层的属性值按key=value的组合后，属性名按字典序用&进行拼接")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("amount=1&appID=6dd50bbfdc3711e898a000163e002b60&buyer=%257B%2522countryCode%2522%253A%25220086%2522%252C%2522name%2522%253A%2522Oxford%2522%252C%2522phoneNumber%2522%253A%252213828770003%2522%257D&charset=UTF-8&currency=mol&external=%E4%B8%8B%E8%AE%A2%E5%8D%95&items=%255B%257B%2522amount%2522%253A%25221%2522%252C%2522currency%2522%253A%2522mol%2522%252C%2522price%2522%253A%25221%2522%252C%2522productID%2522%253A%252200001%2522%252C%2522productItemID%2522%253A%252211111%2522%252C%2522quantity%2522%253A%25221%2522%257D%255D&merchantID=5ae0d007dc3711e898a000163e002b60&merchantTrade=1100113&signType=RSA2\n")])])]),v("ol",{attrs:{start:"4"}},[v("li",[t._v("用商户私钥对上述拼接好的字符串进行RSA签名")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("EtMYFy5LYZBMXD9lCdYq+i0NwpHUOYL+OjWiwm3hJTLcOFaI+EKYZHUUyusP9LTFCd3V3oZpnU85pY/WiVH1isgWgaGCBtAeZqOrKfG+O9rhLRU6opWdIg/Ckv/Jqb3GXdiP4VrFZmawQFgh0T7eqNQj6y30w7YmkHaBhCl07N/c3G7MQaU4W+5xV6YgsEIRAzdX28bGFcOujOnCPF7IsjUnVv4uG8gLAzHg9BLLNUpjC0PzIBU8mgJnYBXUyeSs3z1eHBUPVfB2YuYdRjm9O2hMqmlJR3JbrsPyJnIi8Eet/2Y+JQndgo6UMQghETxK0Dy4mgVyx9feMlMws0NPbA==\n")])])]),v("ol",{attrs:{start:"5"}},[v("li",[t._v("重新分装请求参数")])]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n    "amount": "1",\n    "appID": "6dd50bbfdc3711e898a000163e002b60",\n    "buyer": {\n      "countryCode": "0086",\n      "name": "Oxford",\n      "phoneNumber": "13828770003"\n    },\n    "charset": "UTF-8",\n    "currency": "mol",\n    "external": "下订单",\n    "items": [\n      {\n        "amount": "1",\n        "currency": "mol",\n        "price": "1",\n        "productID": "00001",\n        "productItemID": "11111",\n        "quantity": "1"\n      }\n    ],\n    "merchantID": "5ae0d007dc3711e898a000163e002b60",\n    "merchantTrade": "1100113",\n    "signType": "RSA2",\n    "sign": "EtMYFy5LYZBMXD9lCdYq+i0NwpHUOYL+OjWiwm3hJTLcOFaI+EKYZHUUyusP9LTFCd3V3oZpnU85pY/WiVH1isgWgaGCBtAeZqOrKfG+O9rhLRU6opWdIg/Ckv/Jqb3GXdiP4VrFZmawQFgh0T7eqNQj6y30w7YmkHaBhCl07N/c3G7MQaU4W+5xV6YgsEIRAzdX28bGFcOujOnCPF7IsjUnVv4uG8gLAzHg9BLLNUpjC0PzIBU8mgJnYBXUyeSs3z1eHBUPVfB2YuYdRjm9O2hMqmlJR3JbrsPyJnIi8Eet/2Y+JQndgo6UMQghETxK0Dy4mgVyx9feMlMws0NPbA=="\n  }\n')])])]),v("h5",{attrs:{id:"返回结果"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#返回结果","aria-hidden":"true"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),v("p",[t._v("成功返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":200000,\n\t"message":"OK",\n\t"data":{\n\t\t"prepayID":"2014072300007148",\n\t\t"appID":"2014072300007148",\n\t\t"merchantID":"1230000109",\n\t\t"paylink":"mol://pay?prepayID=${prepayID}&appID=${appID}&merchantID=${merchantID}&sign=${sign}",\n\t\t"sign":"C380BEC2BFD727A4B6845133519F3AD6"\n\t}\n}\n')])])]),v("p",[t._v("失败返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":400001,\n\t"message":"缺少prepayID参数"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("返回状态码")]),t._v(" "),v("td",[t._v("code")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Integer(6)")]),t._v(" "),v("td",[t._v("200000")]),t._v(" "),v("td",[t._v("200000,500000等 此字段是通信标识，非交易标识，交易是否成功需要查看code来判断")])]),t._v(" "),v("tr",[v("td",[t._v("返回信息")]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(128)")]),t._v(" "),v("td",[t._v("OK")]),t._v(" "),v("td",[t._v("当code为200000时返回OK，否则返回信息为错误原因 ，例如签名失败 参数格式校验错误")])]),t._v(" "),v("tr",[v("td",[t._v("结果数据")]),t._v(" "),v("td",[t._v("data")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("json")]),t._v(" "),v("td",[t._v("{}")]),t._v(" "),v("td",[t._v("code为200000时，本参数书才有值，无返回值或者非200000时，本参数为null或者没有data返回")])])])]),t._v(" "),v("p",[t._v("当code为200000时，data结构")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("预支付ID")]),t._v(" "),v("td",[t._v("prepayID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("交易会话的预支付ID")])]),t._v(" "),v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("调用接口提交的应用ID")])]),t._v(" "),v("tr",[v("td",[t._v("商户ID")]),t._v(" "),v("td",[t._v("merchantID")]),t._v(" "),v("td",[t._v("否")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("支付中心分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("C380BEC2BFD727A4B6845133519F3AD6")]),t._v(" "),v("td",[t._v("支付中心返回的签名值")])])])]),t._v(" "),v("h5",{attrs:{id:"错误码"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#错误码","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误码")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("名称")]),t._v(" "),v("th",[t._v("描述")]),t._v(" "),v("th",[t._v("原因")]),t._v(" "),v("th",[t._v("解决方案")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("NO_AUTH")]),t._v(" "),v("td",[t._v("商户无此接口权限")]),t._v(" "),v("td",[t._v("商户未开通此接口权限")]),t._v(" "),v("td",[t._v("请商户前往申请此接口权限")])]),t._v(" "),v("tr",[v("td",[t._v("NOT_ENOUGH")]),t._v(" "),v("td",[t._v("余额不足")]),t._v(" "),v("td",[t._v("用户帐号余额不足")]),t._v(" "),v("td",[t._v("用户帐号余额不足，请用户充值或更换支付卡后再支付")])]),t._v(" "),v("tr",[v("td",[t._v("ORDER_PAID")]),t._v(" "),v("td",[t._v("商户订单已支付")]),t._v(" "),v("td",[t._v("商户订单已支付，无需重复操作")]),t._v(" "),v("td",[t._v("商户订单已支付，无需更多操作")])]),t._v(" "),v("tr",[v("td",[t._v("ORDER_CLOSED")]),t._v(" "),v("td",[t._v("订单已关闭")]),t._v(" "),v("td",[t._v("当前订单已关闭，无法支付")]),t._v(" "),v("td",[t._v("当前订单已关闭，请重新下单")])]),t._v(" "),v("tr",[v("td",[t._v("SYSTEM_ERROR")]),t._v(" "),v("td",[t._v("系统错误")]),t._v(" "),v("td",[t._v("系统超时")]),t._v(" "),v("td",[t._v("系统异常，请用相同参数重新调用")])]),t._v(" "),v("tr",[v("td",[t._v("APPID_NOT_EXIST")]),t._v(" "),v("td",[t._v("APPID不存在")]),t._v(" "),v("td",[t._v("参数中缺少APPID")]),t._v(" "),v("td",[t._v("请检查APPID是否正确")])]),t._v(" "),v("tr",[v("td",[t._v("MCHID_NOT_EXIST")]),t._v(" "),v("td",[t._v("MCHID不存在")]),t._v(" "),v("td",[t._v("参数中缺少MCHID")]),t._v(" "),v("td",[t._v("请检查MCHID是否正确")])]),t._v(" "),v("tr",[v("td",[t._v("APPID_MCHID_NOT_MATCH")]),t._v(" "),v("td",[t._v("appid和mch_id不匹配")]),t._v(" "),v("td",[t._v("appid和mch_id不匹配")]),t._v(" "),v("td",[t._v("请确认appid和mch_id是否匹配")])]),t._v(" "),v("tr",[v("td",[t._v("LACK_PARAMS")]),t._v(" "),v("td",[t._v("缺少参数")]),t._v(" "),v("td",[t._v("缺少必要的请求参数")]),t._v(" "),v("td",[t._v("请检查参数是否齐全")])]),t._v(" "),v("tr",[v("td",[t._v("OUT_TRADE_NO_USED")]),t._v(" "),v("td",[t._v("商户订单号重复")]),t._v(" "),v("td",[t._v("同一笔交易不能多次提交")]),t._v(" "),v("td",[t._v("请核实商户订单号是否重复提交")])]),t._v(" "),v("tr",[v("td",[t._v("SIGN_ERROR")]),t._v(" "),v("td",[t._v("签名错误")]),t._v(" "),v("td",[t._v("参数签名结果不正确")]),t._v(" "),v("td",[t._v("请检查签名参数和方法是否都符合签名算法要求")])]),t._v(" "),v("tr",[v("td",[t._v("REQUIRE_POST_METHOD")]),t._v(" "),v("td",[t._v("请使用post方法")]),t._v(" "),v("td",[t._v("未使用post传递参数")]),t._v(" "),v("td",[t._v("请检查请求参数是否通过post方法提交")])]),t._v(" "),v("tr",[v("td",[t._v("POST_DATA_EMPTY")]),t._v(" "),v("td",[t._v("post数据为空")]),t._v(" "),v("td",[t._v("post数据不能为空")]),t._v(" "),v("td",[t._v("请检查post数据是否为空")])]),t._v(" "),v("tr",[v("td",[t._v("NOT_UTF8")]),t._v(" "),v("td",[t._v("编码格式错误")]),t._v(" "),v("td",[t._v("未使用指定编码格式")]),t._v(" "),v("td",[t._v("请使用UTF-8编码格式")])])])]),t._v(" "),v("h4",{attrs:{id:"获取统一订单"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取统一订单","aria-hidden":"true"}},[t._v("#")]),t._v(" 获取统一订单")]),t._v(" "),v("h5",{attrs:{id:"应用场景-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),v("p",[t._v("商户应用调起钱包后，钱包应用将传递过来的prepayID，appID，调用本接口发送至支付中心，获取统一订单信息")]),t._v(" "),v("h5",{attrs:{id:"接口连接-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#接口连接-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口连接")]),t._v(" "),v("p",[t._v("GET https://api.xxx.com/pay/unifiedorder")]),t._v(" "),v("h5",{attrs:{id:"请求参数-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求参数-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("prepayID=014072300007148&appID=2014072300007148&merchantID=134352&sign=adae13isg\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("预支付ID")]),t._v(" "),v("td",[t._v("prepayID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("交易会话的预支付ID")])]),t._v(" "),v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("支付中心分配给开发者的应用ID，一个商户号可以拥有多个应用")])])])]),t._v(" "),v("h5",{attrs:{id:"返回结果-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#返回结果-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),v("p",[t._v("成功返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":200000,\n\t"message":"OK",\n\t"data":{\n\t\t"prepayID":"2014072300007148",\n\t\t"sender":"mol_1mrj9xomsiaykauks9f731ux651g8yk35sg6nzt6dwqfkrbs5ygirw1hq5kn",\n\t\t"userID":"8d331065d34211e89b0b00163e007a48",\n\t\t"buyer":{\n\t\t\t"name":"李大嘴",\n\t\t\t"countryCode":"0086",\n\t\t\t"phoneNumber":"13888888888"\n\t\t},\n\t\t"current":"mol",\n\t\t"amount":"300",\n\t\t"merchant": {\n\t\t\t"merchantID":"merchantID",\n\t\t\t"merchantName":"电器之家"\n\t\t},\n\t\t"app":{\n\t\t\t"appID":"2014072300007148",\n\t\t\t"appName":"镰刀"\n\t\t}\n\t}\n}\n')])])]),v("p",[t._v("失败返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":400001,\n\t"message":"缺少prepayID参数"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("返回状态码")]),t._v(" "),v("td",[t._v("code")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Integer(6)")]),t._v(" "),v("td",[t._v("200000")]),t._v(" "),v("td",[t._v("200000,500000等 此字段是通信标识，非交易标识，交易是否成功需要查看code来判断")])]),t._v(" "),v("tr",[v("td",[t._v("返回信息")]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(128)")]),t._v(" "),v("td",[t._v("OK")]),t._v(" "),v("td",[t._v("当code为200000时返回OK，否则返回信息为错误原因 ，例如签名失败 参数格式校验错误")])]),t._v(" "),v("tr",[v("td",[t._v("结果数据")]),t._v(" "),v("td",[t._v("data")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("json")]),t._v(" "),v("td",[t._v("{}")]),t._v(" "),v("td",[t._v("code为200000时，本参数书才有值，无返回值或者非200000时，本参数为null或者没有data返回")])])])]),t._v(" "),v("p",[t._v("当code为200000时，data结构")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("预支付ID")]),t._v(" "),v("td",[t._v("prepayID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("交易会话的预支付ID")])]),t._v(" "),v("tr",[v("td",[t._v("中转账户")]),t._v(" "),v("td",[t._v("sender")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(64)")]),t._v(" "),v("td",[t._v("mol_1mrj9xomsiaykauks9f731ux651g8yk35sg6nzt6dwqfkrbs5ygirw1hq5kn")]),t._v(" "),v("td",[t._v("支付中心发布出来供商户中转用的区块链地址")])]),t._v(" "),v("tr",[v("td",[t._v("用户标识")]),t._v(" "),v("td",[t._v("userID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("8d331065d34211e89b0b00163e007a48")]),t._v(" "),v("td",[t._v("发起支付的用户id")])]),t._v(" "),v("tr",[v("td",[t._v("币种")]),t._v(" "),v("td",[t._v("currency")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(16)")]),t._v(" "),v("td",[t._v("MOL")]),t._v(" "),v("td",[t._v("支付币种，默认为mol")])]),t._v(" "),v("tr",[v("td",[t._v("金额")]),t._v(" "),v("td",[t._v("amount")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Decimal(15,3)")]),t._v(" "),v("td",[t._v("300")]),t._v(" "),v("td",[t._v("支付额度，与币种对应")])]),t._v(" "),v("tr",[v("td",[t._v("商户信息")]),t._v(" "),v("td",[t._v("merchant")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("json")]),t._v(" "),v("td",[v("code",[t._v('{"merchantID":"merchantID","merchantName":"电器之家"}')])]),t._v(" "),v("td",[t._v("商户信息，需要包括商户ID和商户名称，用来后台服务确认，及前段展现")])]),t._v(" "),v("tr",[v("td",[t._v("应用信息")]),t._v(" "),v("td",[t._v("app")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("json")]),t._v(" "),v("td",[v("code",[t._v('{"appID":"2014072300007148","appName":"镰刀"}')])]),t._v(" "),v("td",[t._v("应用信息，需要包括应用ID和应用名称，用来后台服务确认，及前端展现")])])])]),t._v(" "),v("h5",{attrs:{id:"错误码-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#错误码-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误码")]),t._v(" "),v("h4",{attrs:{id:"中转支付"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#中转支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 中转支付")]),t._v(" "),v("h5",{attrs:{id:"应用场景-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),v("p",[t._v("钱包应用封装process块信息。然后将块信息，预支付ID，调用中转支付接口，从用户账户往中转账户上打指定额度的款项。")]),t._v(" "),v("h5",{attrs:{id:"状态机-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#状态机-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 状态机")]),t._v(" "),v("h5",{attrs:{id:"接口连接-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#接口连接-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口连接")]),t._v(" "),v("p",[t._v("POST https://api.xxx.com/pay/transfer")]),t._v(" "),v("h5",{attrs:{id:"请求参数-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求参数-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求参数")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("预支付ID")]),t._v(" "),v("td",[t._v("prepayID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("交易会话的预支付ID")])]),t._v(" "),v("tr",[v("td",[t._v("process块信息")]),t._v(" "),v("td",[t._v("block")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(500)")]),t._v(" "),v("td",[t._v("详见process块参数介绍")]),t._v(" "),v("td",[t._v("支付中心调用process rpc")])])])]),t._v(" "),v("p",[t._v("process块参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{  \n  "action": "process",  \n  "block": "{   \n    \\"type\\": \\"state\\",   \n    \\"account\\": \\"xrb_1qato4k7z3spc8gq1zyd8xeqfbzsoxwo36a45ozbrxcatut7up8ohyardu1z\\",   \n    \\"previous\\": \\"6CDDA48608C7843A0AC1122BDD46D9E20E21190986B19EAC23E7F33F2E6A6766\\",   \n    \\"representative\\": \\"xrb_3pczxuorp48td8645bs3m6c3xotxd3idskrenmi65rbrga5zmkemzhwkaznh\\",   \n    \\"balance\\": \\"40200000001000000000000000000000000\\",   \n    \\"link\\": \\"87434F8041869A01C8F6F263B87972D7BA443A72E0A97D7A3FD0CCC2358FD6F9\\",   \n    \\"link_as_account\\": \\"xrb_33t5by1653nt196hfwm5q3wq7oxtaix97r7bhox5zn8eratrzoqsny49ftsd\\",   \n    \\"signature\\": \\"A5DB164F6B81648F914E49CAB533900C389FAAD64FBB24F6902F9261312B29F730D07E9BCCD21D918301419B4E05B181637CF8419ED4DCBF8EF2539EB2467F07\\" \n  }"   \n}\n')])])]),v("p",[t._v("完整参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"prepayID":"1235235",\n\t"appID":"2014072300007148",\n\t"merchantID":"1230000109",\n\t"action": "process",  \n\t"block": "{   \n\t    \\"type\\": \\"state\\",   \n\t    \\"account\\": \\"xrb_1qato4k7z3spc8gq1zyd8xeqfbzsoxwo36a45ozbrxcatut7up8ohyardu1z\\",   \n\t    \\"previous\\": \\"6CDDA48608C7843A0AC1122BDD46D9E20E21190986B19EAC23E7F33F2E6A6766\\",   \n\t    \\"representative\\": \\"xrb_3pczxuorp48td8645bs3m6c3xotxd3idskrenmi65rbrga5zmkemzhwkaznh\\",   \n\t    \\"balance\\": \\"40200000001000000000000000000000000\\",   \n\t    \\"link\\": \\"87434F8041869A01C8F6F263B87972D7BA443A72E0A97D7A3FD0CCC2358FD6F9\\",   \n\t    \\"link_as_account\\": \\"xrb_33t5by1653nt196hfwm5q3wq7oxtaix97r7bhox5zn8eratrzoqsny49ftsd\\",   \n\t    \\"signature\\": \\"A5DB164F6B81648F914E49CAB533900C389FAAD64FBB24F6902F9261312B29F730D07E9BCCD21D918301419B4E05B181637CF8419ED4DCBF8EF2539EB2467F07\\"\n\t  }"\n}\n')])])]),v("h5",{attrs:{id:"返回结果-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#返回结果-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),v("p",[t._v("成功返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":200000,\n\t"message":"OK"\n}\n')])])]),v("p",[t._v("失败返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":400001,\n\t"message":"缺少prepayID参数"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("返回状态码")]),t._v(" "),v("td",[t._v("code")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Integer(6)")]),t._v(" "),v("td",[t._v("200000")]),t._v(" "),v("td",[t._v("200000,500000等 此字段是通信标识，非交易标识，交易是否成功需要查看code来判断")])]),t._v(" "),v("tr",[v("td",[t._v("返回信息")]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(128)")]),t._v(" "),v("td",[t._v("OK")]),t._v(" "),v("td",[t._v("当code为200000时返回OK，否则返回信息为错误原因 ，例如签名失败 参数格式校验错误")])])])]),t._v(" "),v("p",[t._v("若调用中转接口成功，支付中心将从中转账户向商户账户打款，并将余款返回给用户账户。")]),t._v(" "),v("h5",{attrs:{id:"错误码-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#错误码-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误码")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("名称")]),t._v(" "),v("th",[t._v("描述")]),t._v(" "),v("th",[t._v("原因")]),t._v(" "),v("th",[t._v("解决方案")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("NOT_ENOUGH")]),t._v(" "),v("td",[t._v("余额不足")]),t._v(" "),v("td",[t._v("用户帐号余额不足")]),t._v(" "),v("td",[t._v("用户帐号余额不足，请用户充值或更换支付卡后再支付")])]),t._v(" "),v("tr",[v("td",[t._v("ORDER_PAID")]),t._v(" "),v("td",[t._v("商户订单已支付")]),t._v(" "),v("td",[t._v("商户订单已支付，无需重复操作")]),t._v(" "),v("td",[t._v("商户订单已支付，无需更多操作")])]),t._v(" "),v("tr",[v("td",[t._v("ORDER_CLOSED")]),t._v(" "),v("td",[t._v("订单已关闭")]),t._v(" "),v("td",[t._v("当前订单已关闭，无法支付")]),t._v(" "),v("td",[t._v("当前订单已关闭，请重新下单")])]),t._v(" "),v("tr",[v("td",[t._v("SYSTEM_ERROR")]),t._v(" "),v("td",[t._v("系统错误")]),t._v(" "),v("td",[t._v("系统超时")]),t._v(" "),v("td",[t._v("系统异常，请用相同参数重新调用")])]),t._v(" "),v("tr",[v("td",[t._v("APPID_NOT_EXIST")]),t._v(" "),v("td",[t._v("APPID不存在")]),t._v(" "),v("td",[t._v("参数中缺少APPID")]),t._v(" "),v("td",[t._v("请检查APPID是否正确")])]),t._v(" "),v("tr",[v("td",[t._v("PREPAYID_NOT_EXIST")]),t._v(" "),v("td",[t._v("PrepayID不存在")]),t._v(" "),v("td",[t._v("参数中缺少PrepayID")]),t._v(" "),v("td",[t._v("请检查PrepayID是否正确")])]),t._v(" "),v("tr",[v("td",[t._v("PREPAYID_SENDER_NOT_MATCH")]),t._v(" "),v("td",[t._v("sender和交易会话中的中转账户不匹配")]),t._v(" "),v("td",[t._v("sender和交易会话中的中转账户不匹配")]),t._v(" "),v("td",[t._v("请确认sender是否正确")])]),t._v(" "),v("tr",[v("td",[t._v("LACK_PARAMS")]),t._v(" "),v("td",[t._v("缺少参数")]),t._v(" "),v("td",[t._v("缺少必要的请求参数")]),t._v(" "),v("td",[t._v("请检查参数是否齐全")])]),t._v(" "),v("tr",[v("td",[t._v("OUT_TRADE_NO_USED")]),t._v(" "),v("td",[t._v("商户订单号重复")]),t._v(" "),v("td",[t._v("同一笔交易不能多次提交")]),t._v(" "),v("td",[t._v("请核实商户订单号是否重复提交")])]),t._v(" "),v("tr",[v("td",[t._v("REQUIRE_POST_METHOD")]),t._v(" "),v("td",[t._v("请使用post方法")]),t._v(" "),v("td",[t._v("未使用post传递参数")]),t._v(" "),v("td",[t._v("请检查请求参数是否通过post方法提交")])]),t._v(" "),v("tr",[v("td",[t._v("POST_DATA_EMPTY")]),t._v(" "),v("td",[t._v("post数据为空")]),t._v(" "),v("td",[t._v("post数据不能为空")]),t._v(" "),v("td",[t._v("请检查post数据是否为空")])])])]),t._v(" "),v("h4",{attrs:{id:"查询订单"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#查询订单","aria-hidden":"true"}},[t._v("#")]),t._v(" 查询订单")]),t._v(" "),v("h5",{attrs:{id:"应用场景-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),v("p",[t._v("该接口提供所有的订单查询，商户可以通过查询订单接口主动查询订单状态，完成进一步的业务逻辑。\n需要调用查询接口的情况：")]),t._v(" "),v("ul",[v("li",[t._v("当商户服务端、网络、服务器等出现异常，商户系统未收到支付通知")]),t._v(" "),v("li",[t._v("调用支付接口后，返回系统错误或未知交易窗台")]),t._v(" "),v("li",[t._v("调用关单或撤销接口API之前，需要确认支付状态")])]),t._v(" "),v("h5",{attrs:{id:"状态机-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#状态机-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 状态机")]),t._v(" "),v("p",[t._v("请查阅统一下单接口。")]),t._v(" "),v("h5",{attrs:{id:"接口连接-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#接口连接-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口连接")]),t._v(" "),v("p",[t._v("GET https://api.xxx.com/pay/orderquery")]),t._v(" "),v("h5",{attrs:{id:"请求参数-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求参数-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求参数")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("appID=014072300007148&merchantID=1230000109&charset=UTF-8&signType=RSA2&transactionID=1009660380201506130728806387&merchantTrade=20150806125346&sign=xxxxxxx\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("支付中心分配给开发者的应用ID，一个商户号可以拥有多个应用")])]),t._v(" "),v("tr",[v("td",[t._v("商户ID")]),t._v(" "),v("td",[t._v("merchantID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("支付中心分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("编码格式")]),t._v(" "),v("td",[t._v("charset")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("utf-8")]),t._v(" "),v("td",[t._v("请求使用的编码格式，如utf-8,gbk,gb2312等")])]),t._v(" "),v("tr",[v("td",[t._v("签名类型")]),t._v(" "),v("td",[t._v("signType")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(10)")]),t._v(" "),v("td",[t._v("RSA2")]),t._v(" "),v("td",[t._v("商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2")])]),t._v(" "),v("tr",[v("td",[t._v("支付中心订单号")]),t._v(" "),v("td",[t._v("transactionID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1009660380201506130728806387")]),t._v(" "),v("td",[t._v("支付中心订单号，查询时，可以与商户订单号进行二选一，建议优先使用支付中心订单号")])]),t._v(" "),v("tr",[v("td",[t._v("商户订单号")]),t._v(" "),v("td",[t._v("merchantTrade")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("20150806125346")]),t._v(" "),v("td",[t._v("商户系统内部订单号，要求32个字符内，只能是数字、大小写字母_-且在同一个商户号下唯一")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("xxxxx")]),t._v(" "),v("td",[t._v("采用应用私钥对对参数进行非签名外的其他参数进行加密的到的签名数据")])])])]),t._v(" "),v("h5",{attrs:{id:"返回结果-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#返回结果-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),v("p",[t._v("成功返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":200000,\n\t"message":"OK",\n\t"data":{\n\t\t"appID":"2014072300007148",\n\t\t"merchantID":"1230000109",\n\t\t"transactionID":"1009660380201506130728806387",\n\t\t"merchantTrade":"20150806125346",\n\t\t"tradeState":"SUCCESS"\n\t\t"userID":"8d331065d34211e89b0b00163e007a48",\n\t\t"current":"MOL",\n\t\t"amount":"300",\n\t\t"tradeIp":"127.0.0.1",\n\t\t"startAt":"20091225091010",\n\t\t"finishAt":"20091225091010",\n\t\t"buyer":{\n\t\t\t"name":"李大嘴",\n\t\t\t"countryCode":"0086",\n\t\t\t"phoneNumber":"13888888888"\n\t\t}\n\t\t"external":"订阅",\n\t\t"products":[\n\t\t\t{\n\t\t\t\t"productID":"11r23",\n\t\t\t\t"price":"100",\n\t\t\t\t"current":"MOL",\n\t\t\t\t"quantity":"3",\n\t\t\t\t"amount":"300"\n\t\t\t}\n\t\t],\n\t\t"sign":"23olkfaieoaj"\n\t}\n}\n')])])]),v("p",[t._v("失败返回值")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('{\n\t"code":400001,\n\t"message":"缺少merchantID参数"\n}\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("返回状态码")]),t._v(" "),v("td",[t._v("code")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Integer(6)")]),t._v(" "),v("td",[t._v("200000")]),t._v(" "),v("td",[t._v("200000,500000等 此字段是通信标识，非交易标识，交易是否成功需要查看code来判断")])]),t._v(" "),v("tr",[v("td",[t._v("返回信息")]),t._v(" "),v("td",[t._v("message")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(128)")]),t._v(" "),v("td",[t._v("OK")]),t._v(" "),v("td",[t._v("当code为200000时返回OK，否则返回信息为错误原因 ，例如签名失败 参数格式校验错误")])]),t._v(" "),v("tr",[v("td",[t._v("结果数据")]),t._v(" "),v("td",[t._v("data")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("json")]),t._v(" "),v("td",[t._v("{}")]),t._v(" "),v("td",[t._v("code为200000时，本参数书才有值，无返回值或者非200000时，本参数为null或者没有data返回")])])])]),t._v(" "),v("p",[t._v("当code为200000时，data结构")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("应用ID")]),t._v(" "),v("td",[t._v("appID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("2014072300007148")]),t._v(" "),v("td",[t._v("调用接口提交的应用ID")])]),t._v(" "),v("tr",[v("td",[t._v("商户ID")]),t._v(" "),v("td",[t._v("merchantID")]),t._v(" "),v("td",[t._v("否")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("支付中心分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("支付中心订单号")]),t._v(" "),v("td",[t._v("transactionID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1009660380201506130728806387")]),t._v(" "),v("td",[t._v("支付中心订单号，查询时，可以与商户订单号进行二选一，建议优先使用支付中心订单号")])]),t._v(" "),v("tr",[v("td",[t._v("商户订单号")]),t._v(" "),v("td",[t._v("merchantTrade")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("20150806125346")]),t._v(" "),v("td",[t._v("商户系统内部订单号，要求32个字符内，只能是数字、大小写字母_-且在同一个商户号下唯一")])]),t._v(" "),v("tr",[v("td",[t._v("交易状态")]),t._v(" "),v("td",[t._v("tradeState")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("SUCCESS")]),t._v(" "),v("td",[v("code",[t._v("SUCCESS——支付成功``REFUND——转入退款``NO_TPAY——未支付``CLOSED——已关闭``USER_PAYING——用户支付中``PAY_ERROR——支付失败(其他原因，如块返回失败)")])])]),t._v(" "),v("tr",[v("td",[t._v("用户标识")]),t._v(" "),v("td",[t._v("userID")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("8d331065d34211e89b0b00163e007a48")]),t._v(" "),v("td",[t._v("发起支付的用户id")])]),t._v(" "),v("tr",[v("td",[t._v("交易开始时间")]),t._v(" "),v("td",[t._v("startAt")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(14)")]),t._v(" "),v("td",[t._v("20091225091010")]),t._v(" "),v("td",[t._v("订单生成时间，格式为yyyyMMddHHmmss，如2009年12月25日9点10分10秒表示为20091225091010。")])]),t._v(" "),v("tr",[v("td",[t._v("交易完成时间")]),t._v(" "),v("td",[t._v("finishAt")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(14)")]),t._v(" "),v("td",[t._v("20091225091010")]),t._v(" "),v("td",[t._v("订单失效时间，格式为yyyyMMddHHmmss，如2009年12月27日9点10分10秒表示为20091227091010。")])]),t._v(" "),v("tr",[v("td",[t._v("币种")]),t._v(" "),v("td",[t._v("currency")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(16)")]),t._v(" "),v("td",[t._v("MOL")]),t._v(" "),v("td",[t._v("支付币种，默认为mol")])]),t._v(" "),v("tr",[v("td",[t._v("金额")]),t._v(" "),v("td",[t._v("amount")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("Decimal(15,3)")]),t._v(" "),v("td",[t._v("10")]),t._v(" "),v("td",[t._v("支付额度，与币种对应")])]),t._v(" "),v("tr",[v("td",[t._v("商品信息")]),t._v(" "),v("td",[t._v("products")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("jsonArray")]),t._v(" "),v("td",[t._v('[{"productID":"11r23","price":"100","currency":"MOL","quantity":"3","sum":"300"}]')]),t._v(" "),v("td",[t._v("商品信息列表")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("C380BEC2BFD727A4B6845133519F3AD6")]),t._v(" "),v("td",[t._v("微信返回的签名值")])])])]),t._v(" "),v("h5",{attrs:{id:"错误码-4"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#错误码-4","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误码")]),t._v(" "),v("p",[t._v("参考上述的错误描述")])])}],!1,null,null,null);_.default=a.exports}}]);